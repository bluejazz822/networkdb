---
name: n8n API Integration Service
status: open
created: 2025-09-16T17:42:16Z
updated: 2025-09-17T01:53:30Z
github: https://github.com/bluejazz822/networkdb/issues/14
depends_on: [13]
parallel: false
conflicts_with: []
---

# Task: n8n API Integration Service

## Description
Implement the core service layer for integrating with the n8n API at http://172.16.30.60:5678. This service will handle authentication, workflow discovery, status polling, and manual execution triggers with proper error handling and retry logic.

## Acceptance Criteria
- [ ] Create N8nService class with API client configuration
- [ ] Implement API key authentication with X-N8N-API-KEY header
- [ ] Add workflow discovery and registration functionality
- [ ] Implement workflow status polling with rate limiting
- [ ] Add manual workflow execution trigger capability
- [ ] Include retry logic with exponential backoff
- [ ] Handle API errors gracefully with proper logging
- [ ] Add comprehensive unit tests for all service methods

## Technical Details
- **Implementation approach**: TypeScript service class with axios HTTP client
- **Key considerations**:
  - Rate limiting: max 10 requests per minute
  - Retry logic: exponential backoff with max 3 attempts
  - Error handling: differentiate between network, auth, and API errors
  - Timeout configuration: 30 seconds for API calls
- **Code locations/files affected**:
  - `backend/src/services/N8nService.ts`
  - `backend/src/types/workflow.ts`
  - `backend/src/config/n8n.ts`
  - `backend/tests/services/N8nService.test.ts`

## Dependencies
- [ ] Task 001: Database schema must be completed
- [ ] n8n API key configured in environment variables
- [ ] Network connectivity to n8n instance verified

## Effort Estimate
- Size: L
- Hours: 12
- Parallel: false (depends on database schema)

## Definition of Done
- [ ] N8nService class implemented with all required methods
- [ ] API authentication working with valid credentials
- [ ] Workflow list retrieval and parsing functional
- [ ] Status polling working with rate limiting
- [ ] Manual execution triggers working correctly
- [ ] Error handling tested with various failure scenarios
- [ ] Unit tests achieving >90% code coverage
- [ ] Integration tested with real n8n instance
